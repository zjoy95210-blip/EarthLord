# EarthLord 游戏设计文档 (GDD)

**版本**: 1.0
**日期**: 2025-12-26
**游戏名称**: EarthLord（地球领主）
**类型**: LBS生存策略游戏
**平台**: iOS

---

## 1. 游戏概述

### 1.1 一句话描述
> 用双脚丈量废土，用智慧重建文明——一款将现实行走与末日生存结合的LBS策略游戏。

### 1.2 游戏类型
- **主类型**: LBS（基于位置的服务）游戏
- **子类型**: 生存策略 + 社交
- **对标产品**: 《宝可梦GO》+ 《饥荒》+ 《部落冲突》

### 1.3 核心卖点
1. **Walk to Earn**: 走路即产出，将运动与游戏深度结合
2. **真实地图圈地**: 在真实世界用脚步划定领地
3. **末日生存主题**: 希望朋克视觉风格，废土重建叙事
4. **LBS社交**: 基于位置的交易与通讯

---

## 2. 世界观设定

### 2.1 背景故事

**2048年 - 终末战争**
> 全球文明在72小时内崩塌，99%的人口消失。城市变成废墟，科技倒退百年，旧世界的秩序不复存在。

**2051年 - 新开拓者协议**
> 幸存者们从废墟中走出。为了重建秩序，《新开拓者协议》颁布：
>
> **"凡以双足丈量之无主土地，皆为开拓者所有。"**

**玩家身份**
> 你是一名刚从避难所醒来的幸存者。门口的终端机闪烁着微弱的光，邀请你加入《新开拓者协议》，开始你的开拓之旅。

### 2.2 视觉风格：希望朋克 (Hopepunk)

| 元素 | 设计方向 |
|------|----------|
| 整体氛围 | 废土之上的新生，绝望中的希望 |
| 色调 | 灰褐色废墟 + 生机绿色植物 |
| 建筑风格 | 破败的旧世界建筑 + 新生的临时设施 |
| UI风格 | 工业感、科幻感、带有锈蚀质感 |
| 地图风格 | 卫星地图 + 末日滤镜叠加 |

### 2.3 核心法则

1. **土地法则**: 以双足丈量的无主土地归开拓者所有
2. **活跃法则**: 30天内开始建设，90天保持活跃，否则土地回收
3. **交易法则**: 旧世界货币失效，以物易物是新秩序
4. **生存法则**: 必须持续进食饮水，否则体力衰竭

---

## 3. 核心游戏循环

### 3.1 主循环图

```
┌─────────────────────────────────────────────────────┐
│                    核心游戏循环                       │
├─────────────────────────────────────────────────────┤
│                                                      │
│   [登录注册] → [圈地占领] → [探索搜刮] → [获得资源]   │
│        ↑                                    ↓        │
│        │         ┌────────────────────────────┐     │
│        │         │      资源三大用途：          │     │
│        │         │  1. 建造建筑（消耗）         │     │
│        │         │  2. 交易换物（流通）         │     │
│        │         │  3. 生存消耗（维持）         │     │
│        │         └────────────────────────────┘     │
│        │                                    ↓        │
│        └─── [通讯社交] ← [成就排行] ← [发展壮大]     │
│                                                      │
└─────────────────────────────────────────────────────┘
```

### 3.2 循环解析

| 阶段 | 玩家行为 | 游戏反馈 | 心理驱动 |
|------|----------|----------|----------|
| 圈地 | 户外行走，绕圈闭合 | 获得永久领地 | 成就感、所有权 |
| 探索 | 前往真实地标 | 获得资源物品 | 收集欲、探索欲 |
| 建造 | 消耗资源建设 | 基地发展壮大 | 建设感、成长感 |
| 交易 | 与他人以物易物 | 获得稀缺资源 | 社交、博弈乐趣 |
| 生存 | 消耗食物和水 | 保持体力上限 | 紧迫感、持续登录 |

### 3.3 日常玩法循环

**短期循环（日循环）**:
1. 登录游戏，查看生存体征
2. 消耗食物/水补充体力
3. 外出探索附近POI，搜刮资源
4. 检查交易市场，完成交易
5. 回到领地，建造/升级建筑
6. 查看成就/排行榜

**长期循环（周/月循环）**:
1. 扩张领地版图
2. 升级通讯设备，扩大社交范围
3. 解锁高级建筑
4. 冲击排行榜
5. 收集稀有成就

---

## 4. 系统设计

### 4.1 GPS圈地系统

#### 4.1.1 圈地流程

```
[点击开始圈地] → [开始行走] → [绘制轨迹] → [回到起点] → [闭合验证] → [领地确权]
```

#### 4.1.2 圈地规则

| 规则项 | 数值/描述 |
|--------|-----------|
| 最小面积 | 100 平方米 |
| 最大面积 | 10,000 平方米（普通用户） |
| 闭合距离 | 起点20米范围内自动闭合 |
| 移动速度限制 | 1-15 km/h（防止驾车作弊） |
| 重叠检测 | 不允许与他人领地重叠 |
| 自交检测 | 轨迹不允许自我交叉 |

#### 4.1.3 领地属性

| 属性 | 说明 |
|------|------|
| 名称 | 用户自定义，最长20字符 |
| 面积 | 系统自动计算，单位：平方米 |
| 建筑容量 | 由面积决定，每1000m²可建1座建筑 |
| 创建时间 | 记录圈地时间 |
| 活跃状态 | 活跃/休眠/回收预警 |
| 交易开关 | 是否允许他人查看交易挂单 |

---

### 4.2 探索搜刮系统

#### 4.2.1 POI类型与资源映射

| POI类型 | 图标 | 产出资源 | 资源稀有度 |
|---------|------|----------|------------|
| 医院/药店 | 🏥 | 药品、急救包、抗生素 | 稀有 |
| 超市/餐厅 | 🏪 | 罐头食品、饮用水 | 普通 |
| 工厂/工地 | 🏭 | 金属材料、零件 | 普通 |
| 公园/林地 | 🌲 | 木材、纤维 | 普通 |
| 银行/珠宝店 | 🏦 | 稀有材料、电子元件 | 史诗 |
| 加油站 | ⛽ | 燃料 | 稀有 |
| 学校/图书馆 | 🏫 | 知识碎片 | 稀有 |

#### 4.2.2 搜刮机制

| 参数 | 数值 |
|------|------|
| 触发距离 | 50米范围内 |
| 搜刮冷却 | 同一POI 4小时后可再次搜刮 |
| 产出数量 | 1-5件物品（随机） |
| 稀有度加成 | 会员可提升稀有物品概率 |

#### 4.2.3 探索统计

- 探索距离（公里）
- 探索时长（分钟）
- 搜刮次数
- 获得物品总数

---

### 4.3 背包系统

#### 4.3.1 背包规格

| 等级 | 容量 | 获取方式 |
|------|------|----------|
| 初始背包 | 100格 | 默认 |
| 扩展背包 | 200格 | 建造仓库 |
| 高级背包 | 500格 | 会员特权 |

#### 4.3.2 物品分类

| 分类 | 物品示例 | 用途 |
|------|----------|------|
| 食物 | 罐头、面包、肉干 | 恢复饱食度 |
| 饮品 | 饮用水、果汁 | 恢复水分 |
| 药品 | 急救包、抗生素 | 恢复生命值 |
| 材料 | 木材、金属、布料 | 建造消耗 |
| 稀有品 | 电子元件、卫星模块 | 高级建造/交易 |

---

### 4.4 建造系统

#### 4.4.1 建筑列表

**Tier 1 - 生存基础**

| 建筑 | 消耗资源 | 功能 |
|------|----------|------|
| 篝火 | 石头×20, 木材×30 | 取暖，防止夜间体力下降 |
| 庇护所 | 木材×50, 布料×20 | 休息恢复，加速体力回复 |
| 集水器 | 金属×10, 玻璃×5 | 每日产出饮用水 |

**Tier 2 - 功能扩展**

| 建筑 | 消耗资源 | 功能 |
|------|----------|------|
| 小仓库 | 木材×100, 金属×50 | 扩展背包容量+50 |
| 农田 | 种子×10, 工具×5 | 每日产出食物 |
| 工作台 | 金属×80, 工具×10 | 可合成高级物品 |

**Tier 3 - 高级设施**

| 建筑 | 消耗资源 | 功能 |
|------|----------|------|
| 太阳能板 | 电子元件×20, 金属×100 | 提供电力，解锁电力建筑 |
| 营地电台 | 卫星模块×1, 电子×50 | 通讯范围扩展至10km |
| 医疗站 | 药品×100, 医疗设备×10 | 自动恢复生命值 |

#### 4.4.2 建筑状态机

```
[建造中] ──建造完成──▶ [待激活] ──激活操作──▶ [运行中]
                                              │
                                              ▼
                                          [损坏] ──维修──▶ [运行中]
```

| 状态 | 可执行操作 |
|------|------------|
| 建造中 | 等待、取消 |
| 待激活 | 激活 |
| 运行中 | 升级、停用 |
| 损坏 | 维修、拆除 |

---

### 4.5 交易系统

#### 4.5.1 交易流程

```
[卖家发布挂单] → [买家进入100米范围] → [买家看到挂单] → [买家接受] → [物品交换]
```

#### 4.5.2 交易规则

| 规则 | 描述 |
|------|------|
| 触发距离 | 需进入卖家领地100米范围 |
| 交易类型 | 以物易物，无货币系统 |
| 挂单时效 | 72小时后自动下架 |
| 手续费 | 无（鼓励交易） |

---

### 4.6 通讯系统

#### 4.6.1 设备升级路径

```
[收音机] → [对讲机] → [营地电台] → [卫星通讯]
  只收听     3km收发     10km收发      全球收发
```

| 设备 | 功能 | 获取方式 |
|------|------|----------|
| 收音机 | 只能接收官方消息 | 默认装备 |
| 对讲机 | 收发消息，范围3km | 建造或购买 |
| 营地电台 | 范围10km，支持频道 | 建造 |
| 卫星通讯 | 全球范围 | 高级建造 |

#### 4.6.2 频道系统

| 频道类型 | 描述 |
|----------|------|
| 公共频道 | 覆盖范围内所有人可见 |
| 私人频道 | 用户创建，邀请加入 |
| 联盟频道 | 联盟成员专属 |

#### 4.6.3 PTT呼叫

- **操作**: 长按说话，松开发送
- **格式**: 语音消息
- **沉浸感**: 模拟真实对讲机操作

---

### 4.7 生存体征系统

#### 4.7.1 体征参数

| 参数 | 最大值 | 衰减速度 | 影响 |
|------|--------|----------|------|
| 核心生命 | 100 | 饱食度/水分低于20%时-5/小时 | 归0死亡 |
| 饱食度 | 100% | -5%/小时 | 低于20%开始掉血 |
| 水分 | 100% | -10%/小时 | 低于20%开始掉血 |

#### 4.7.2 增益机制

| 条件 | 增益效果 |
|------|----------|
| 饱食度 > 80% | 探索距离+10% |
| 水分 > 80% | 搜刮产出+10% |
| 双满 > 80% | 叠加所有增益 |

#### 4.7.3 死亡惩罚

- 随机丢失20%背包物品
- 从最后的庇护所复活
- 体征恢复至50%

---

### 4.8 成长系统

#### 4.8.1 排行榜

| 榜单 | 排名依据 |
|------|----------|
| 领地面积榜 | 总领地面积（m²） |
| 探索废墟榜 | 累计搜刮次数 |
| 建筑数量榜 | 拥有建筑总数 |

#### 4.8.2 成就系统

**成就分类**:

| 类别 | 示例 | 奖励 |
|------|------|------|
| 新手成就 | "初出茅庐"：完成第一次圈地 | 100金币 |
| 探索成就 | "末世拾荒者"：搜刮100次 | 500金币 |
| 建造成就 | "基建狂魔"：建造10座建筑 | 1000金币 |
| 社交成就 | "人脉广阔"：完成10次交易 | 500金币 |
| 隐藏成就 | "传奇开拓者"：领地面积达10万m² | 5000金币 |

**稀有度等级**:
- 普通（灰色）
- 稀有（蓝色）
- 史诗（紫色）
- 传说（金色）

---

## 5. 商业化设计

### 5.1 付费点设计哲学

> **原则**: 付费加速，不付费也能玩；卖便利，不卖实力

### 5.2 订阅制

| 订阅类型 | 价格 | 权益 |
|----------|------|------|
| 开拓者月卡 | $9.99/月 | 无限探索次数、搜刮范围+50%、背包+100格 |
| 领主通行证 | $19.99/月 | 包含月卡所有权益、专属皮肤、VIP频道、圈地面积上限翻倍 |

### 5.3 一次性购买

| 商品 | 价格 | 内容 |
|------|------|------|
| 初级物资包 | $0.99 | 食物×50、水×50 |
| 中级物资包 | $2.99 | 食物×100、水×100、药品×20 |
| 稀有资源包 | $9.99 | 电子元件×10、卫星模块×1 |

### 5.4 变现预期

| 用户类型 | 占比 | ARPU |
|----------|------|------|
| 免费用户 | 80% | $0 |
| 月卡用户 | 15% | $9.99-19.99/月 |
| 大R用户 | 5% | $50+/月 |

---

## 6. 数值设计

### 6.1 经济系统

#### 资源产出（每日）

| 来源 | 产出量 | 限制 |
|------|--------|------|
| POI搜刮 | 10-50件 | 取决于探索距离 |
| 农田 | 5件食物 | 需建造农田 |
| 集水器 | 10件饮用水 | 需建造集水器 |

#### 资源消耗（每日）

| 用途 | 消耗量 |
|------|--------|
| 生存消耗 | 约10食物、20水 |
| 建筑维护 | 根据建筑数量 |

### 6.2 难度曲线

| 阶段 | 天数 | 主要挑战 |
|------|------|----------|
| 新手期 | 1-7天 | 学习基础操作，圈第一块地 |
| 成长期 | 8-30天 | 扩张领地，建立基础设施 |
| 发展期 | 31-90天 | 升级高级建筑，参与交易社交 |
| 成熟期 | 90天+ | 冲击排行榜，收集稀有成就 |

---

## 7. 界面设计

### 7.1 主界面布局

```
┌─────────────────────────────────────┐
│ [用户头像] [资源栏]     [设置齿轮]  │ ← 顶部导航
├─────────────────────────────────────┤
│                                     │
│                                     │
│         [卫星地图视图]              │ ← 主地图区域
│          玩家位置                   │
│          领地显示                   │
│          POI标记                    │
│                                     │
│                                     │
├─────────────────────────────────────┤
│ [开始圈地]            [探索搜刮]    │ ← 快捷操作区
├─────────────────────────────────────┤
│ [地图] [背包] [建造] [通讯] [个人]  │ ← 底部导航栏
└─────────────────────────────────────┘
```

### 7.2 关键界面列表

| 界面 | 主要功能 |
|------|----------|
| 登录界面 | 邮箱登录、Apple登录、Google登录 |
| 地图界面 | 查看位置、领地、POI |
| 圈地界面 | 实时轨迹、面积显示 |
| 领地详情 | 领地信息、建筑列表 |
| 背包界面 | 物品列表、使用/丢弃 |
| 建造界面 | 建筑目录、配方、建造 |
| 交易界面 | 挂单列表、发布交易 |
| 通讯界面 | 消息、公共频道、私人频道、PTT |
| 个人界面 | 档案、成就、排行榜、设置 |

---

## 8. 音效设计

### 8.1 环境音效

| 场景 | 音效 |
|------|------|
| 主地图 | 风声、远处废墟环境音 |
| 圈地中 | 脚步声、GPS定位音 |
| 搜刮时 | 翻找声、金属碰撞声 |

### 8.2 交互音效

| 操作 | 音效 |
|------|------|
| 圈地成功 | 胜利号角 |
| 搜刮获得 | 开箱音效 |
| 建造完成 | 锤子敲击 |
| 交易成功 | 握手音效 |
| PTT发送 | 无线电滋滋声 |

### 8.3 背景音乐

| 场景 | 风格 |
|------|------|
| 主界面 | 希望感的后摇滚 |
| 探索中 | 紧张的电子乐 |
| 建造界面 | 轻松的氛围音乐 |

---

## 9. 技术要点

### 9.1 关键技术

| 技术 | 用途 | 对应代码 |
|------|------|----------|
| Apple MapKit | 地图显示、POI获取 | LocationManager.swift |
| CoreLocation | GPS定位、轨迹记录 | LocationManager.swift |
| PostGIS | 地理空间数据存储 | Supabase Database |
| Supabase Realtime | 实时消息推送 | CommunicationManager.swift |
| StoreKit 2 | 内购支付 | StoreKitManager.swift |
| EventBus | 成就事件监听 | AchievementManager.swift |

### 9.2 防作弊措施

| 作弊类型 | 检测方式 |
|----------|----------|
| GPS欺骗 | 速度异常检测（>50km/h） |
| 模拟器 | 设备指纹检测 |
| 多开 | 账号设备绑定 |
| 位置瞬移 | 位置连续性检测 |

---

## 10. 代码文件映射

### 第一部分：登录与圈地

| 功能 | 核心文件 |
|------|----------|
| 登录注册 | AuthManager.swift |
| GPS圈地 | LocationManager.swift |
| 领地管理 | TerritoryManager.swift |

### 第二部分：探索与资源

| 功能 | 核心文件 |
|------|----------|
| POI发现 | POIManager.swift |
| 探索搜刮 | ExplorationManager.swift |
| 背包系统 | ItemManager.swift |

### 第三部分：建造与交易

| 功能 | 核心文件 |
|------|----------|
| 建造系统 | BuildingManager.swift |
| 交易系统 | TradeManager.swift |

### 第四部分：通讯系统

| 功能 | 核心文件 |
|------|----------|
| 消息中心 | RadioManager.swift |
| 实时聊天 | CommunicationManager.swift |
| 频道管理 | ChannelManager.swift |

### 第五部分：个人中心

| 功能 | 核心文件 |
|------|----------|
| 内购支付 | StoreKitManager.swift |
| 排行榜 | LeaderboardManager.swift |
| 成就系统 | AchievementManager.swift |
| 生存体征 | VitalSignsManagerV2.swift |

---

## 11. 附录

### 11.1 术语表

| 术语 | 定义 |
|------|------|
| 开拓者 | 玩家的游戏内身份 |
| 圈地 | 通过GPS轨迹划定领地的行为 |
| POI | Point of Interest，兴趣点/地标 |
| 搜刮 | 在POI处获取资源的行为 |
| 挂单 | 发布交易物品等待他人接受 |
| PTT | Push to Talk，按键说话 |
| 希望朋克 | 视觉风格，废土之上的新生 |

### 11.2 参考游戏

| 游戏 | 参考点 |
|------|--------|
| 宝可梦GO | LBS玩法、POI探索 |
| 饥荒 | 生存体征、建造系统 |
| 部落冲突 | 领地建设、资源循环 |
| 辐射：避难所 | 末日世界观、希望朋克风格 |

---

**文档结束**

---

> *"在废土之上，我们用双脚丈量希望，用双手重建家园。"*
>
> *—— 《新开拓者协议》序言*
